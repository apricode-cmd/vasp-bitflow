# üéâ Apricode Exchange - –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

**–î–∞—Ç–∞:** 25 –æ–∫—Ç—è–±—Ä—è 2024, 19:54  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–ß–ò–ô –ü–†–û–ï–ö–¢**

---

## ‚úÖ –í–°–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **‚úÖ DATABASE_URL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**
   - –ë—ã–ª–æ: `postgresql://postgres:postgres@localhost:5432/apricode_dev`
   - –°—Ç–∞–ª–æ: `postgresql://bogdankononenko@localhost:5432/apricode_dev`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞

2. **‚úÖ NextAuth v5 –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
   - –£–¥–∞–ª—ë–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–π `src/lib/auth.ts`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `src/auth.ts` —Å NextAuth v5 API
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **‚úÖ Prisma Schema –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞**
   - PascalCase –º–æ–¥–µ–ª–∏ (User, Order, etc.)
   - –í—Å–µ relations –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –º–µ—Å—Ç–µ
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: prisma.user —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

4. **‚úÖ Seed –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã**
   - 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Admin + Client)
   - 4 –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã
   - 8 —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä
   - 3 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ë–î –∑–∞–ø–æ–ª–Ω–µ–Ω–∞

5. **‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**
   - –í—Å–µ –ø–æ–ª—è order.cryptoAmount –≤–º–µ—Å—Ç–æ order.amount
   - order.feeAmount –≤–º–µ—Å—Ç–æ order.fee
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

6. **‚úÖ ESLint —á–∏—Å—Ç—ã–π**
   - 0 –æ—à–∏–±–æ–∫
   - 0 warnings
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π

---

## üöÄ –ö–∞–∫ –≤–æ–π—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:3000/login**
2. –í–≤–µ–¥–∏—Ç–µ:
   - **Email:** `admin@apricode.io`
   - **Password:** `SecureAdmin123!`
3. –ù–∞–∂–º–∏—Ç–µ **"Sign In"**
4. ‚úÖ –í—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ `/dashboard` –∏–ª–∏ `/admin`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –¢–µ—Å—Ç–æ–≤—ã–π –∫–ª–∏–µ–Ω—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **http://localhost:3000/login**
2. –í–≤–µ–¥–∏—Ç–µ:
   - **Email:** `client@test.com`
   - **Password:** `TestClient123!`
3. –ù–∞–∂–º–∏—Ç–µ **"Sign In"**
4. ‚úÖ Redirect –Ω–∞ `/dashboard`
5. ‚úÖ –ú–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã (KYC —É–∂–µ APPROVED)

---

## üóÑÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**Prisma Studio:** http://localhost:5555

–í Prisma Studio –≤—ã –º–æ–∂–µ—Ç–µ:
- –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–∞–±–ª–∏—Ü–∞ `User`)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª–∏ (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
- –£–≤–∏–¥–µ—Ç—å –∑–∞–∫–∞–∑—ã (—Ç–∞–±–ª–∏—Ü–∞ `Order`)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å KYC —Å—Ç–∞—Ç—É—Å—ã (—Ç–∞–±–ª–∏—Ü–∞ `KycSession`)
- –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é

---

## üéØ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- http://localhost:3000 - Landing page
- http://localhost:3000/login - –í—Ö–æ–¥
- http://localhost:3000/register - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

### ‚úÖ –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ (client@test.com)
- http://localhost:3000/dashboard - Dashboard —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- http://localhost:3000/buy - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- http://localhost:3000/orders - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
- http://localhost:3000/kyc - KYC —Å—Ç–∞—Ç—É—Å (APPROVED)
- http://localhost:3000/profile - –ü—Ä–æ—Ñ–∏–ª—å

### ‚úÖ –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ (admin@apricode.io)
- http://localhost:3000/admin - –ê–¥–º–∏–Ω dashboard
- http://localhost:3000/admin/orders - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- http://localhost:3000/admin/kyc - –û–±–∑–æ—Ä KYC
- http://localhost:3000/admin/settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### ‚úÖ API Endpoints
- GET /api/auth/providers - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- GET /api/auth/csrf - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
- GET /api/rates - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—É—Ä—Å—ã
- POST /api/orders - ‚úÖ –°–æ–∑–¥–∞—ë—Ç –∑–∞–∫–∞–∑—ã (—Å auth)
- GET /api/orders - ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ (—Å auth)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω—ã (bcrypt, 10 rounds)
- ‚úÖ JWT —Å–µ—Å—Å–∏–∏ (30 –¥–Ω–µ–π)
- ‚úÖ –í—Å–µ API protected
- ‚úÖ Zod –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥–∞—Ö
- ‚úÖ SQL Injection –∑–∞—â–∏—Ç–∞ (Prisma)
- ‚úÖ XSS –∑–∞—â–∏—Ç–∞ (React)
- ‚úÖ Security headers

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

```
‚úÖ User: 2 –∑–∞–ø–∏—Å–∏
   - admin@apricode.io (ADMIN)
   - client@test.com (CLIENT, KYC APPROVED)

‚úÖ Profile: 2 –∑–∞–ø–∏—Å–∏

‚úÖ KycSession: 1 –∑–∞–ø–∏—Å—å
   - client@test.com (APPROVED)

‚úÖ Currency: 4 –∑–∞–ø–∏—Å–∏
   - BTC, ETH, USDT, SOL

‚úÖ FiatCurrency: 2 –∑–∞–ø–∏—Å–∏
   - EUR, PLN

‚úÖ TradingPair: 8 –∑–∞–ø–∏—Å–µ–π
   - –í—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –∫—Ä–∏–ø—Ç–∞/—Ñ–∏–∞—Ç

‚úÖ Order: 3 –∑–∞–ø–∏—Å–∏
   - PENDING, PROCESSING, COMPLETED

‚úÖ BankDetails: 2 –∑–∞–ø–∏—Å–∏
   - EUR, PLN –±–∞–Ω–∫–∏

‚úÖ SystemSettings: 7 –∑–∞–ø–∏—Å–µ–π
   - –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
```
http://localhost:3000/login
```

### –®–∞–≥ 2: –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω
```
Email: admin@apricode.io
Password: SecureAdmin123!
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```
http://localhost:3000/admin
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (2 users, 3 orders)
- ‚úÖ –ù–µ–¥–∞–≤–Ω–∏–µ –∑–∞–∫–∞–∑—ã
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

## ‚ùì –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω?
```bash
curl http://localhost:3000
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: –ë–∞–∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∞?
```bash
psql postgresql://bogdankononenko@localhost:5432/apricode_dev -c "SELECT email FROM \"User\";"
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å admin@apricode.io –∏ client@test.com
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: Prisma —Ä–∞–±–æ—Ç–∞–µ—Ç?
```bash
cd "/Users/bogdankononenko/–†–∞–±–æ—Ç–∞/Development/Project/crm vasp"
npx prisma studio
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5555
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É User
```

---

## üéä –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤!

**–°–µ—Ä–≤–µ—Ä:** üü¢ http://localhost:3000  
**Prisma Studio:** üü¢ http://localhost:5555  
**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** üü¢ –ó–∞–ø–æ–ª–Ω–µ–Ω–∞  
**–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** üü¢ –†–∞–±–æ—Ç–∞–µ—Ç  

**–í—Å–µ 18 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω—ã! MVP –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ


