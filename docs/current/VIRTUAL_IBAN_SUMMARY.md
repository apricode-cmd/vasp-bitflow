# Virtual IBAN Module - –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

> **–°—Ç–∞—Ç—É—Å:** Ready for Implementation  
> **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** High  
> **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium-High  
> **–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 5-6 –Ω–µ–¥–µ–ª—å

---

## üéØ –ß—Ç–æ –º—ã –¥–µ–ª–∞–µ–º?

–°–æ–∑–¥–∞—ë–º –º–æ–¥—É–ª—å –¥–ª—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Å—á–µ—Ç–æ–≤ (Virtual IBAN)** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.

### –ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å ‚ùå
```
–ö–ª–∏–µ–Ω—Ç ‚Üí –ë–∞–Ω–∫–æ–≤—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –æ–±—â–∏–π IBAN
             ‚Üì
–ê–¥–º–∏–Ω –≤—Ä—É—á–Ω—É—é —Å–≤–µ—Ä—è–µ—Ç –ø–æ –∏–º–µ–Ω–∏/reference
             ‚Üì
–ú–µ–¥–ª–µ–Ω–Ω–æ, —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫, –ø–ª–æ—Ö–æ–π UX
```

### –†–µ—à–µ–Ω–∏–µ —Å vIBAN ‚úÖ
```
–ö–ª–∏–µ–Ω—Ç ‚Üí –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –°–í–û–ô –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π IBAN
             ‚Üì
–°–∏—Å—Ç–µ–º–∞ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç
             ‚Üì
–ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
```

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≤ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö

### 1. –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FRONTEND                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å         ‚îÇ  –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –ø–∞–Ω–µ–ª—å          ‚îÇ
‚îÇ  - –°–ø–∏—Å–æ–∫ vIBANs      ‚îÇ  - –ú–æ–π vIBAN                ‚îÇ
‚îÇ  - Reconciliation     ‚îÇ  - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π         ‚îÇ
‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ         ‚îÇ  - –°–∫–∞—á–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   API LAYER                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  /api/admin/virtual-iban/*                          ‚îÇ
‚îÇ  /api/client/virtual-iban/*                         ‚îÇ
‚îÇ  /api/webhooks/bcb/virtual-iban  ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ BCB Webhook
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              VIRTUAL IBAN SERVICE                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚úì createVirtualIban()                              ‚îÇ
‚îÇ  ‚úì getVirtualIban()                                 ‚îÇ
‚îÇ  ‚úì handleIncomingPayment()                          ‚îÇ
‚îÇ  ‚úì reconcilePayment()                               ‚îÇ
‚îÇ  ‚úì suspendAccount()                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
                          ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           INTEGRATION LAYER (Strategy)              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                IVirtualIbanProvider                 ‚îÇ
‚îÇ           (–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                          ‚îÇ
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚ñº              ‚ñº              ‚ñº
     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ   BCB   ‚îÇ    ‚îÇ Currency ‚îÇ   ‚îÇ Modulr   ‚îÇ
     ‚îÇ  Group  ‚îÇ    ‚îÇ  Cloud   ‚îÇ   ‚îÇ Finance  ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
     BCB Group API
     - –°–æ–∑–¥–∞–Ω–∏–µ —Å—á—ë—Ç–∞
     - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
     - Webhooks
```

### 2. User Flow

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø –ò KYC                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  User —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è ‚Üí KYC APPROVED                  ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç vIBAN                 ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  POST /api/integrations/bcb/create-account           ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  BCB –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç: IBAN, BIC, Bank Name                ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î: VirtualIbanAccount                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 2. –ö–õ–ò–ï–ù–¢ –í–ò–î–ò–¢ –°–í–û–ô vIBAN                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  /client/virtual-iban                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ  üí≥ Your Virtual IBAN                      ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ                                            ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  IBAN: DE89 3704 0044 0532 0130 00  üìã    ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  BIC:  COBADEFFXXX                         ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  Bank: BCB Partner Bank                    ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  Currency: EUR                             ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ                                            ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  [üìÑ Download Payment Instructions]        ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 3. –ö–õ–ò–ï–ù–¢ –î–ï–õ–ê–ï–¢ –ü–ï–†–ï–í–û–î                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  –ö–ª–∏–µ–Ω—Ç –≤ —Å–≤–æ—ë–º –±–∞–Ω–∫–µ:                               ‚îÇ
‚îÇ  ‚Ä¢ –ü–æ–ª—É—á–∞—Ç–µ–ª—å: My Crypto Platform                    ‚îÇ
‚îÇ  ‚Ä¢ IBAN: DE89370400440532013000                      ‚îÇ
‚îÇ  ‚Ä¢ –°—É–º–º–∞: ‚Ç¨1,000                                     ‚îÇ
‚îÇ  ‚Ä¢ Reference: "Order #APR-12345"                     ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  SEPA –ø–µ—Ä–µ–≤–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω ‚Üí BCB –ø–æ–ª—É—á–∞–µ—Ç –ø–ª–∞—Ç—ë–∂        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 4. WEBHOOK –ò AUTO-RECONCILIATION                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  BCB ‚Üí POST /api/webhooks/bcb/virtual-iban           ‚îÇ
‚îÇ  {                                                   ‚îÇ
‚îÇ    "account_id": 12345,                              ‚îÇ
‚îÇ    "credit": 1,                                      ‚îÇ
‚îÇ    "amount": "1000.00",                              ‚îÇ
‚îÇ    "ccy": "EUR",                                     ‚îÇ
‚îÇ    "sender_name": "John Doe",                        ‚îÇ
‚îÇ    "reference": "Order #APR-12345"                   ‚îÇ
‚îÇ  }                                                   ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç VirtualIbanAccount (account_id)     ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –ù–∞—Ö–æ–¥–∏—Ç Order –ø–æ reference –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π        ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –û–±–Ω–æ–≤–ª—è–µ—Ç Order.status ‚Üí PAYMENT_RECEIVED           ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –°–æ–∑–¥–∞—ë—Ç PayIn –∑–∞–ø–∏—Å—å                                ‚îÇ
‚îÇ            ‚Üì                                         ‚îÇ
‚îÇ  –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Email: "–ü–ª–∞—Ç—ë–∂ –ø–æ–ª—É—á–µ–Ω!"                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/lib/integrations/
‚îú‚îÄ‚îÄ categories/
‚îÇ   ‚îî‚îÄ‚îÄ IVirtualIbanProvider.ts          # ‚Üê –ù–û–í–´–ô –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îî‚îÄ‚îÄ virtual-iban/
‚îÇ       ‚îú‚îÄ‚îÄ BCBGroupAdapter.ts           # ‚Üê –ù–û–í–´–ô BCB –∞–¥–∞–ø—Ç–µ—Ä
‚îÇ       ‚îú‚îÄ‚îÄ CurrencyCloudAdapter.ts      # ‚Üê –ë—É–¥—É—â–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îÇ       ‚îî‚îÄ‚îÄ ModulrAdapter.ts             # ‚Üê –ë—É–¥—É—â–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚îî‚îÄ‚îÄ types.ts                             # + IntegrationCategory.VIRTUAL_IBAN

src/lib/services/
‚îî‚îÄ‚îÄ virtual-iban.service.ts              # ‚Üê –ù–û–í–´–ô —Å–µ—Ä–≤–∏—Å

src/app/api/
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îî‚îÄ‚îÄ virtual-iban/
‚îÇ       ‚îú‚îÄ‚îÄ route.ts                     # GET /POST —Å–æ–∑–¥–∞–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ [id]/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ route.ts                 # GET –¥–µ—Ç–∞–ª–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ suspend/route.ts         # POST suspend
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ reactivate/route.ts      # POST reactivate
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ close/route.ts           # POST close
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ transactions/route.ts    # GET —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ reconcile/route.ts           # POST —Ä—É—á–Ω–∞—è —Å–≤–µ—Ä–∫–∞
‚îú‚îÄ‚îÄ client/
‚îÇ   ‚îî‚îÄ‚îÄ virtual-iban/
‚îÇ       ‚îú‚îÄ‚îÄ my-accounts/route.ts         # GET –º–æ–∏ vIBANs
‚îÇ       ‚îú‚îÄ‚îÄ [id]/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ transactions/route.ts    # GET —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ request/route.ts             # POST –∑–∞–ø—Ä–æ—Å –Ω–æ–≤–æ–≥–æ
‚îî‚îÄ‚îÄ webhooks/
    ‚îî‚îÄ‚îÄ bcb/
        ‚îî‚îÄ‚îÄ virtual-iban/route.ts        # POST webhook –æ—Ç BCB

src/components/
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îî‚îÄ‚îÄ virtual-iban/
‚îÇ       ‚îú‚îÄ‚îÄ VirtualIbanList.tsx          # –°–ø–∏—Å–æ–∫ vIBANs
‚îÇ       ‚îú‚îÄ‚îÄ VirtualIbanDetails.tsx       # –î–µ—Ç–∞–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ ReconciliationTool.tsx       # –†—É—á–Ω–∞—è —Å–≤–µ—Ä–∫–∞
‚îÇ       ‚îî‚îÄ‚îÄ CreateVirtualIbanModal.tsx   # –°–æ–∑–¥–∞–Ω–∏–µ vIBAN
‚îî‚îÄ‚îÄ client/
    ‚îî‚îÄ‚îÄ virtual-iban/
        ‚îú‚îÄ‚îÄ VirtualIbanCard.tsx          # –ö–∞—Ä—Ç–æ—á–∫–∞ —Å IBAN
        ‚îú‚îÄ‚îÄ CopyIbanButton.tsx           # –ö–Ω–æ–ø–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
        ‚îú‚îÄ‚îÄ TransactionHistory.tsx       # –ò—Å—Ç–æ—Ä–∏—è
        ‚îî‚îÄ‚îÄ PaymentInstructions.tsx      # PDF –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

prisma/schema.prisma
# + VirtualIbanAccount model
# + VirtualIbanTransaction model
# + VirtualIbanStatus enum
# + TransactionType enum
```

---

## üíæ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### `VirtualIbanAccount`
```typescript
{
  id: "viban_abc123",
  userId: "user_xyz",
  providerId: "BCB_GROUP",
  providerAccountId: "12345",
  iban: "DE89370400440532013000",
  bic: "COBADEFFXXX",
  bankName: "BCB Partner Bank",
  accountHolder: "John Doe",
  currency: "EUR",
  country: "DE",
  status: "ACTIVE", // ACTIVE | SUSPENDED | CLOSED
  balance: 1250.50,
  createdAt: "2024-01-01T00:00:00Z"
}
```

### `VirtualIbanTransaction`
```typescript
{
  id: "tx_abc123",
  virtualIbanId: "viban_abc123",
  providerTxId: "TXN-BCB-456",
  type: "CREDIT", // CREDIT | DEBIT
  amount: 1000.00,
  currency: "EUR",
  senderName: "John Doe",
  senderIban: "GB29NWBK60161331926819",
  reference: "Order #APR-12345",
  status: "COMPLETED",
  orderId: "order_xyz",
  payInId: "payin_abc",
  reconciledAt: "2024-01-01T12:00:00Z",
  processedAt: "2024-01-01T11:00:00Z"
}
```

---

## üîå API Endpoints

### Admin

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| `GET` | `/api/admin/virtual-iban` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö vIBANs |
| `POST` | `/api/admin/virtual-iban` | –°–æ–∑–¥–∞—Ç—å vIBAN –¥–ª—è —é–∑–µ—Ä–∞ |
| `GET` | `/api/admin/virtual-iban/:id` | –î–µ—Ç–∞–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ |
| `POST` | `/api/admin/virtual-iban/:id/suspend` | –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å |
| `POST` | `/api/admin/virtual-iban/:id/reactivate` | –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å |
| `POST` | `/api/admin/virtual-iban/:id/close` | –ó–∞–∫—Ä—ã—Ç—å |
| `GET` | `/api/admin/virtual-iban/:id/transactions` | –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ |
| `POST` | `/api/admin/virtual-iban/reconcile` | –†—É—á–Ω–∞—è —Å–≤–µ—Ä–∫–∞ |

### Client

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| `GET` | `/api/client/virtual-iban/my-accounts` | –ú–æ–∏ vIBANs |
| `GET` | `/api/client/virtual-iban/:id/transactions` | –ú–æ–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ |
| `POST` | `/api/client/virtual-iban/request` | –ó–∞–ø—Ä–æ—Å–∏—Ç—å –Ω–æ–≤—ã–π vIBAN |

### Webhook

| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| `POST` | `/api/webhooks/bcb/virtual-iban` | BCB webhook –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π |

---

## üé® UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### Admin Panel

**Virtual IBAN Management** (`/admin/virtual-iban`)
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Virtual IBANs                                      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [Filters: User | Status | Currency]  [+ Create]    ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇUser ‚îÇ IBAN         ‚îÇStatus‚îÇCurrency ‚îÇActions  ‚îÇ ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îÇ
‚îÇ  ‚îÇJohn ‚îÇDE89...13000  ‚îÇActive‚îÇEUR      ‚îÇüëÅÔ∏è ‚è∏Ô∏è ‚ùå‚îÇ ‚îÇ
‚îÇ  ‚îÇJane ‚îÇGB29...26819  ‚îÇActive‚îÇGBP      ‚îÇüëÅÔ∏è ‚è∏Ô∏è ‚ùå‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Client Panel

**My Virtual IBAN** (`/client/virtual-iban`)
```tsx
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üí≥ Your Virtual IBAN                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì  ‚îÇ
‚îÇ  ‚îÉ  IBAN:  DE89 3704 0044 0532 0130 00  üìã     ‚îÉ  ‚îÇ
‚îÇ  ‚îÉ  BIC:   COBADEFFXXX                         ‚îÉ  ‚îÇ
‚îÇ  ‚îÉ  Bank:  BCB Partner Bank                    ‚îÉ  ‚îÇ
‚îÇ  ‚îÉ  Currency: EUR                               ‚îÉ  ‚îÇ
‚îÇ  ‚îÉ  Balance: ‚Ç¨1,250.50                         ‚îÉ  ‚îÇ
‚îÇ  ‚îó‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îõ  ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  [üìÑ Download Payment Instructions (PDF)]          ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  Recent Transactions:                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇDate      ‚îÇAmount  ‚îÇStatus              ‚îÇ         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îÇ
‚îÇ  ‚îÇ01.12.24  ‚îÇ‚Ç¨1000.00‚îÇ‚úÖ Completed         ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ28.11.24  ‚îÇ‚Ç¨500.00 ‚îÇ‚úÖ Completed         ‚îÇ         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ Phase 1: Infrastructure (Week 1-2)
```bash
[ ] Create IVirtualIbanProvider interface
[ ] Implement BCBGroupAdapter
[ ] Add Prisma models (VirtualIbanAccount, VirtualIbanTransaction)
[ ] Create VirtualIbanService
[ ] Add to IntegrationRegistry
[ ] Setup BCB sandbox credentials
```

### ‚úÖ Phase 2: API Layer (Week 2-3)
```bash
[ ] Admin API endpoints
[ ] Client API endpoints
[ ] Webhook endpoint (BCB)
[ ] Authentication & authorization
[ ] Input validation (Zod schemas)
[ ] Error handling
```

### ‚úÖ Phase 3: Auto-reconciliation (Week 3-4)
```bash
[ ] Webhook processing logic
[ ] Order matching algorithm (by reference, amount, userId)
[ ] PayIn creation/update
[ ] Notification triggers (email, in-app)
[ ] Audit logging
```

### ‚úÖ Phase 4: UI Components (Week 4-5)
```bash
[ ] Admin: VirtualIbanList
[ ] Admin: VirtualIbanDetails
[ ] Admin: ReconciliationTool
[ ] Client: VirtualIbanCard
[ ] Client: TransactionHistory
[ ] Client: PaymentInstructions (PDF)
```

### ‚úÖ Phase 5: Testing (Week 5)
```bash
[ ] Unit tests (services, adapters)
[ ] Integration tests (API endpoints)
[ ] BCB sandbox testing
[ ] End-to-end testing
[ ] Error scenarios
```

### ‚úÖ Phase 6: Production (Week 6)
```bash
[ ] Production BCB credentials
[ ] Migration script (create vIBANs for existing users)
[ ] Monitoring & alerts (webhook failures, reconciliation errors)
[ ] Documentation (API docs, user guide)
[ ] User communication (email announcement)
```

---

## üéØ Success Metrics

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º:

| –ú–µ—Ç—Ä–∏–∫–∞ | Target |
|---------|--------|
| **Auto-reconciliation rate** | > 95% |
| **Average reconciliation time** | < 1 minute |
| **Webhook processing time** | < 5 seconds |
| **vIBAN creation success rate** | > 99% |
| **User satisfaction** | NPS > 8 |
| **Admin time saved** | -80% on payment verification |

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|-----------|
| BCB API downtime | Medium | Retry logic, fallback to manual |
| Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç | Low | Polling as backup |
| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–≤–µ—Ä–∫–∞ | Medium | Manual review tool, confidence score |
| –ú–æ—à–µ–Ω–Ω–∏—á–µ—Å–∫–∏–µ –ø–ª–∞—Ç–µ–∂–∏ | Medium | KYC verification, AML checks |
| Regulatory compliance | High | Legal review, T&Cs update |

---

## üìù Next Steps

1. ‚úÖ **Review architecture** —Å –∫–æ–º–∞–Ω–¥–æ–π
2. ‚è≥ **Get BCB sandbox credentials** (–µ—Å–ª–∏ –Ω–µ—Ç)
3. ‚è≥ **Approve budget** (BCB fees)
4. ‚è≥ **Assign developers** (Backend + Frontend)
5. ‚è≥ **Start Phase 1** (Infrastructure)

---

## ü§î Open Questions

- [ ] –°–æ–∑–¥–∞–≤–∞—Ç—å vIBAN –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É?
- [ ] –†–∞–∑—Ä–µ—à–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞–ª—é—Ç –Ω–∞ –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (multi-currency)?
- [ ] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π KYC level –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è vIBAN?
- [ ] –ö–æ–º–∏—Å—Å–∏—è –∑–∞ vIBAN (–±–µ—Å–ø–ª–∞—Ç–Ω–æ / ‚Ç¨X per month)?
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ vIBAN –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?
- [ ] –õ–∏–º–∏—Ç—ã –Ω–∞ –≤—Ö–æ–¥—è—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã (per transaction, daily)?

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞! –ù–∞—á–∏–Ω–∞–µ–º –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é? üöÄ**





