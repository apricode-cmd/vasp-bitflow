# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–ª—è Virtual IBAN

**–î–∞—Ç–∞:** 22 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Phase 1 MVP –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ —è–∑—ã–∫–∏)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π

---

## ‚úÖ Phase 1 MVP - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (–î–µ–∫–∞–±—Ä—å 2024)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ì—Ä–µ—á–µ—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç (ŒñŒëŒìŒüŒ°Œë ‚Üí ZAGORA)
- ‚úÖ –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ (–ú–æ—Å–∫–≤–∞ ‚Üí Moskva, –ö–∏—ó–≤ ‚Üí Kiiv)
- ‚úÖ –õ–∞—Ç–∏–Ω–∏—Ü–∞ —Å –¥–∏–∞–∫—Ä–∏—Ç–∏–∫–∞–º–∏ (—É–ª—É—á—à–µ–Ω–æ)

**–§–∞–π–ª—ã:**
- `src/lib/utils/universal-transliterate.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å
- `src/lib/utils/bcb-sanitize.ts` - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- `src/components/features/virtual-iban/EditableConfirmationDialog.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω UI

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** `any-ascii@0.3.3`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** `scripts/test-universal-transliteration.ts` - 11/14 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ

---

---

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

Sumsub –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∞–¥—Ä–µ—Å–∞ –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —è–∑—ã–∫–∞—Ö:
- **–ì—Ä–µ—á–µ—Å–∫–∏–π:** ŒñŒëŒìŒüŒ°Œë ‚Üí –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å ZAGORA
- **–ö–∏—Ä–∏–ª–ª–∏—Ü–∞:** –ú–æ—Å–∫–≤–∞ ‚Üí –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å Moskva
- **–ê—Ä–∞–±—Å–∫–∏–π:** ÿßŸÑŸÇÿßŸáÿ±ÿ© ‚Üí –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å Al-Qahirah
- **–ö–∏—Ç–∞–π—Å–∫–∏–π:** Âåó‰∫¨ ‚Üí –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å Beijing
- **–Ø–ø–æ–Ω—Å–∫–∏–π:** Êù±‰∫¨ ‚Üí –¥–æ–ª–∂–Ω–∞ —Å—Ç–∞—Ç—å Tokyo

**–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –¥–∏–∞–∫—Ä–∏—Ç–∏–∫–∏ (√∏, √•, √º, √©), –Ω–æ –Ω–µ –Ω–µ–ª–∞—Ç–∏–Ω—Å–∫–∏–µ –∞–ª—Ñ–∞–≤–∏—Ç—ã.

---

## üìä –û—Ü–µ–Ω–∫–∞ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä–∞:

1. **–ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**
   - –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –ª—é–±—ã—Ö —Å—Ç—Ä–∞–Ω
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞–ª—Ñ–∞–≤–∏—Ç–æ–≤ –º–∏—Ä–∞
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

2. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**
   - –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Virtual IBAN
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–Ω–∏–∂–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏–π –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
   - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏
   - –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö

4. **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º**
   - ISO 15924 (–∫–æ–¥—ã –ø–∏—Å—å–º–µ–Ω–Ω–æ—Å—Ç–µ–π)
   - UNGEGN (United Nations Group of Experts on Geographical Names)
   - BGN/PCGN (Board on Geographic Names)

### ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç–∏:

1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å**
   - –†–∞–∑–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –ø–∏—Å—å–º–∞ —Ç—Ä–µ–±—É—é—Ç —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —è–∑—ã–∫–∏ –∏–º–µ—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è (–æ–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É)

2. **–û–±—ä–µ–º —Ä–∞–±–æ—Ç—ã**
   - 50+ –æ—Å–Ω–æ–≤–Ω—ã—Ö —è–∑—ã–∫–æ–≤
   - 100+ —Å–∏—Å—Ç–µ–º –ø–∏—Å—å–º–∞
   - –¢—ã—Å—è—á–∏ –ø—Ä–∞–≤–∏–ª —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏

3. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞**
   - –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**‚úÖ –°–¢–û–ò–¢ –†–ï–ê–õ–ò–ó–û–í–ê–¢–¨**, –Ω–æ –ø–æ—ç—Ç–∞–ø–Ω–æ:

**Phase 1 (MVP):** –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ —è–∑—ã–∫–∏ —Å –Ω–µ–ª–∞—Ç–∏–Ω—Å–∫–∏–º–∏ –∞–ª—Ñ–∞–≤–∏—Ç–∞–º–∏
- –ì—Ä–µ—á–µ—Å–∫–∏–π
- –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ (—Ä—É—Å—Å–∫–∏–π, —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π, –±–æ–ª–≥–∞—Ä—Å–∫–∏–π)
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –≤—ã—Å–æ–∫–∏–π (–º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —ç—Ç–∏—Ö —Å—Ç—Ä–∞–Ω)

**Phase 2:** –ê–∑–∏–∞—Ç—Å–∫–∏–µ —è–∑—ã–∫–∏
- –ö–∏—Ç–∞–π—Å–∫–∏–π (Pinyin)
- –Ø–ø–æ–Ω—Å–∫–∏–π (—Ä–æ–º–∞–¥–∑–∏)
- –ö–æ—Ä–µ–π—Å–∫–∏–π (—Ä–æ–º–∞–Ω–∏–∑–∞—Ü–∏—è)
- –ê—Ä–∞–±—Å–∫–∏–π (BGN/PCGN)

**Phase 3:** –û—Å—Ç–∞–ª—å–Ω—ã–µ —è–∑—ã–∫–∏
- –ü–æ –∑–∞–ø—Ä–æ—Å—É –∏–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- `transliteration` (npm) - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 50+ —è–∑—ã–∫–æ–≤
- `unidecode` (npm) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
- `any-ascii` (npm) - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ì–æ—Ç–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–ª—è –Ω–∞—à–∏—Ö –Ω—É–∂–¥

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å
- ‚úÖ –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ –Ω–∞—à–∏ –Ω—É–∂–¥—ã

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ë–æ–ª—å—à–æ–π –æ–±—ä–µ–º —Ä–∞–±–æ—Ç—ã
- ‚ùå –ù—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚ùå –†–∏—Å–∫ –æ—à–∏–±–æ–∫

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–û–ü–¢–ò–ú–ê–õ–¨–ù–´–ô)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞:**
- –ë–∞–∑–æ–≤–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- Fallback –Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —è–∑—ã–∫–æ–≤

---

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Phase 1: MVP - –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–µ —è–∑—ã–∫–∏ (1-2 –Ω–µ–¥–µ–ª–∏)

#### –®–∞–≥ 1: –í—ã–±–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (1 –¥–µ–Ω—å)

**–ö–∞–Ω–¥–∏–¥–∞—Ç—ã:**
1. **`any-ascii`** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   - –†–∞–∑–º–µ—Ä: ~50KB
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞: 100+ —è–∑—ã–∫–æ–≤
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

2. **`transliteration`**
   - –†–∞–∑–º–µ—Ä: ~200KB
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞: 50+ —è–∑—ã–∫–æ–≤
   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

3. **`unidecode`**
   - –†–∞–∑–º–µ—Ä: ~100KB
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è
   - –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —Å—Ä–µ–¥–Ω—è—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** `any-ascii` - –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

#### –®–∞–≥ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (1 –¥–µ–Ω—å)

```typescript
// src/lib/utils/universal-transliterate.ts
import anyAscii from 'any-ascii';

/**
 * Universal transliteration for all languages
 * Converts any Unicode text to ASCII
 */
export function transliterateToASCII(input: string): string {
  if (!input) return '';
  return anyAscii(input);
}
```

#### –®–∞–≥ 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ bcb-sanitize.ts (2 –¥–Ω—è)

```typescript
// –û–±–Ω–æ–≤–∏—Ç—å sanitizeForBCB:
export function sanitizeForBCB(input: string | null | undefined, allowComma: boolean = false): string {
  if (!input) return '';
  
  let result = input;
  
  // Step 1: Universal transliteration (NEW)
  result = transliterateToASCII(result);
  
  // Step 2: Apply existing Latin diacritics map (keep for compatibility)
  for (const [char, replacement] of Object.entries(TRANSLITERATION_MAP)) {
    result = result.replace(new RegExp(char, 'g'), replacement);
  }
  
  // Step 3: Remove any remaining non-ASCII characters
  const allowedPattern = allowComma 
    ? /[^a-zA-Z0-9\/\-\?:().'+ ,]/g
    : /[^a-zA-Z0-9\/\-\?:().'+ ]/g;
  
  result = result.replace(allowedPattern, '');
  
  // Step 4-5: Cleanup (existing logic)
  // ...
  
  return result.trim();
}
```

#### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –¥–Ω—è)

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**
- –ì—Ä–µ—á–µ—Å–∫–∏–π: ŒñŒëŒìŒüŒ°Œë ‚Üí ZAGORA
- –ö–∏—Ä–∏–ª–ª–∏—Ü–∞: –ú–æ—Å–∫–≤–∞ ‚Üí Moskva, –ö–∏—ó–≤ ‚Üí Kyiv
- –ê—Ä–∞–±—Å–∫–∏–π: ÿßŸÑŸÇÿßŸáÿ±ÿ© ‚Üí Al-Qahirah
- –ö–∏—Ç–∞–π—Å–∫–∏–π: Âåó‰∫¨ ‚Üí Beijing
- –Ø–ø–æ–Ω—Å–∫–∏–π: Êù±‰∫¨ ‚Üí Tokyo
- –°–º–µ—à–∞–Ω–Ω—ã–µ: "Moscow, –ú–æ—Å–∫–≤–∞" ‚Üí "Moscow, Moskva"

#### –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI (1 –¥–µ–Ω—å)

- –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ `EditableConfirmationDialog`
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —è–∑—ã–∫–æ–≤
- –£–ª—É—á—à–∏—Ç—å UX –¥–ª—è –Ω–µ–ª–∞—Ç–∏–Ω—Å–∫–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤

---

### Phase 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (2-3 –Ω–µ–¥–µ–ª–∏)

#### –®–∞–≥ 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª

**–î–ª—è –∞–¥—Ä–µ—Å–æ–≤:**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (—É–ª–∏—Ü–∞, –Ω–æ–º–µ—Ä –¥–æ–º–∞)
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π —É–ª–∏—Ü
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–π (—É–ª., –ø—Ä., –±—É–ª.)

**–î–ª—è –∏–º–µ–Ω:**
- –£—á–µ—Ç –∫—É–ª—å—Ç—É—Ä–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–º–µ–Ω

#### –®–∞–≥ 2: –Ø–∑—ã–∫–æ–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```typescript
// –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –¥–ª—è –ª—É—á—à–µ–π —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
function detectLanguage(text: string): string {
  // –ü—Ä–æ—Å—Ç–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è –ø–æ Unicode ranges
  if (/[\u0370-\u03FF]/.test(text)) return 'greek';
  if (/[\u0400-\u04FF]/.test(text)) return 'cyrillic';
  if (/[\u4E00-\u9FFF]/.test(text)) return 'chinese';
  // ...
  return 'unknown';
}
```

#### –®–∞–≥ 3: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

- –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—é –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- –£–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU

---

### Phase 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (1 –Ω–µ–¥–µ–ª—è)

#### –®–∞–≥ 1: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ë–µ–Ω—á–º–∞—Ä–∫–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

#### –®–∞–≥ 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
- –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
- –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

#### –®–∞–≥ 3: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:

```
src/lib/utils/
‚îú‚îÄ‚îÄ bcb-sanitize.ts              # –û–±–Ω–æ–≤–∏—Ç—å (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å universal-transliterate)
‚îú‚îÄ‚îÄ universal-transliterate.ts   # –ù–û–í–´–ô - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ language-detection.ts         # –ù–û–í–´–ô (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¥–µ—Ç–µ–∫—Ü–∏—è —è–∑—ã–∫–∞
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```json
{
  "dependencies": {
    "any-ascii": "^0.3.2"  // –õ–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏
  }
}
```

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```typescript
import { transliterateToASCII } from '@/lib/utils/universal-transliterate';

// –ì—Ä–µ—á–µ—Å–∫–∏–π
transliterateToASCII('ŒñŒëŒìŒüŒ°Œë')  // ‚Üí 'ZAGORA'

// –ö–∏—Ä–∏–ª–ª–∏—Ü–∞
transliterateToASCII('–ú–æ—Å–∫–≤–∞')  // ‚Üí 'Moskva'

// –ê—Ä–∞–±—Å–∫–∏–π
transliterateToASCII('ÿßŸÑŸÇÿßŸáÿ±ÿ©')  // ‚Üí 'Al-Qahirah'

// –ö–∏—Ç–∞–π—Å–∫–∏–π
transliterateToASCII('Âåó‰∫¨')  // ‚Üí 'Bei Jing'

// –°–º–µ—à–∞–Ω–Ω—ã–π
transliterateToASCII('Moscow, –ú–æ—Å–∫–≤–∞, Âåó‰∫¨')  // ‚Üí 'Moscow, Moskva, Bei Jing'
```

---

## üìä –û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç

### Phase 1 (MVP): 5-7 –¥–Ω–µ–π
- –í—ã–±–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: 0.5 –¥–Ω—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: 1 –¥–µ–Ω—å
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ sanitize: 2 –¥–Ω—è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 2 –¥–Ω—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI: 1 –¥–µ–Ω—å

### Phase 2 (–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞): 10-15 –¥–Ω–µ–π
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞: 5 –¥–Ω–µ–π
- –Ø–∑—ã–∫–æ–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è: 3 –¥–Ω—è
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: 2 –¥–Ω—è
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 5 –¥–Ω–µ–π

### Phase 3 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è): 5 –¥–Ω–µ–π
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2 –¥–Ω—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: 2 –¥–Ω—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 1 –¥–µ–Ω—å

**–ò—Ç–æ–≥–æ:** 20-27 –¥–Ω–µ–π (4-5 –Ω–µ–¥–µ–ª—å)

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### Phase 1 (MVP):
- ‚úÖ –ì—Ä–µ—á–µ—Å–∫–∏–π –∞–ª—Ñ–∞–≤–∏—Ç —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ö–∏—Ä–∏–ª–ª–∏—Ü–∞ —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è Virtual IBAN: 99%+
- ‚úÖ –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —è–∑—ã–∫–æ–≤

### Phase 2:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 20+ —è–∑—ã–∫–æ–≤
- ‚úÖ –¢–æ—á–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏: 95%+
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: < 10ms –Ω–∞ –∞–¥—Ä–µ—Å

### Phase 3:
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `any-ascii`** –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `sanitizeForBCB`** –∫–∞–∫ –ø–µ—Ä–≤—ã–π —à–∞–≥
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≥—Ä–µ—á–µ—Å–∫–∏—Ö –∞–¥—Ä–µ—Å–∞—Ö** –∏–∑ Sumsub
4. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —è–∑—ã–∫–æ–≤

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–Ø–∑—ã–∫–æ–≤–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞** –¥–ª—è –∞–¥—Ä–µ—Å–æ–≤
3. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

---

## üìù –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: –ù–µ—Ç–æ—á–Ω–∞—è —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Fallback –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)

### –†–∏—Å–∫ 2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —á–∞—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤

### –†–∏—Å–∫ 3: –†–µ–≥—Ä–µ—Å—Å–∏–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫

---

## ‚úÖ –í—ã–≤–æ–¥

**–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–æ—Ä —Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏–∏:**
- ‚úÖ **–ù–µ–æ–±—Ö–æ–¥–∏–º** –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **–†–µ–∞–ª–∏–∑—É–µ–º** –ø–æ—ç—Ç–∞–ø–Ω–æ (MVP ‚Üí –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è ‚Üí –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É** (`any-ascii`) + –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π (—Ä–µ—à–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `any-ascii`
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `bcb-sanitize.ts`
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ production

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 22 –¥–µ–∫–∞–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

