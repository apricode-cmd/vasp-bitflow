# üß™ –õ–æ–∫–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –ü–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π (–±–µ–∑–æ–ø–∞—Å–Ω–æ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î):

1. ‚úÖ Backup –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
3. ‚úÖ –ò–∑–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –î–û
4. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
5. ‚úÖ –ò–∑–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ü–û–°–õ–ï
6. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
7. ‚úÖ –ï—Å–ª–∏ –≤—Å—ë –û–ö ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ production

---

## üì¶ –®–∞–≥ 1: Backup –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î (2 –º–∏–Ω—É—Ç—ã)

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DATABASE_URL:

```bash
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î (–Ω–µ production!)
echo $DATABASE_URL

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
# postgresql://postgres:password@localhost:5432/crm_vasp
# –∏–ª–∏ –≤–∞—à Supabase dev: postgres://...supabase.co:5432/postgres
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –£–±–µ–¥–∏—Å—å —á—Ç–æ —ç—Ç–æ –ù–ï production URL!

---

### –°–æ–∑–¥–∞—Ç—å backup:

```bash
# –°–¥–µ–ª–∞—Ç—å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x scripts/backup-local-db.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å backup
./scripts/backup-local-db.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –°–æ–∑–¥–∞–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `backups/`
- Dump –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î ‚Üí `backups/local_backup_YYYYMMDD_HHMMSS.sql`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ Backup completed successfully!
üìÅ File: backups/local_backup_20250114_123456.sql
üìä Size: 15MB
üìã Tables backed up: 45
```

**‚úÖ Backup –≥–æ—Ç–æ–≤? ‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!**

---

## üîç –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã (1 –º–∏–Ω—É—Ç–∞)

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã —É–∂–µ –µ—Å—Ç—å
psql $DATABASE_URL -f scripts/check-existing-indexes.sql
```

**–ß—Ç–æ —É–≤–∏–¥–∏–º:**
```
 tablename | indexname                    | index_size
-----------+------------------------------+-----------
 Order     | Order_pkey                   | 48 kB
 Order     | Order_userId_idx (–µ—Å–ª–∏ –µ—Å—Ç—å) | 32 kB
 User      | User_pkey                    | 16 kB
 User      | User_email_key               | 8 kB
 ...
```

**–ó–∞–ø–∏—à–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤:**
```
Current index count: _____ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 25)
```

---

## üìä –®–∞–≥ 3: –ò–∑–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –î–û (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
npx tsx scripts/test-indexes-local.ts
```

**–ß—Ç–æ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è:**

1. **Orders by userId** - –ø–æ–∏—Å–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Orders by status** - —Ñ–∏–ª—å—Ç—Ä –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É
3. **Orders with JOIN** - –∑–∞–∫–∞–∑—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **KYC by status** - KYC —Å–µ—Å—Å–∏–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É
5. **Wallets by currency** - –∫–æ—à–µ–ª—å–∫–∏ –ø–æ –≤–∞–ª—é—Ç–µ
6. **Audit by entity** - –ª–æ–≥–∏ –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üß™ Testing Database Query Performance

üìä Running queries BEFORE indexes...

1Ô∏è‚É£  Orders by user ID
  Find orders by userId: 45ms

2Ô∏è‚É£  Orders by status
  Find PENDING orders: 78ms

3Ô∏è‚É£  Orders with user JOIN
  Orders with user include: 123ms

4Ô∏è‚É£  KYC sessions by status
  Find PENDING KYC: 56ms

5Ô∏è‚É£  User wallets by currency
  Find BTC wallets: 34ms

6Ô∏è‚É£  Audit logs by entity
  Find Order audit logs: 89ms

=============================================================
üìä BASELINE MEASUREMENTS (Before Indexes):

1. Orders by userId: 45ms
2. Orders by status: 78ms
3. Orders with JOIN: 123ms
4. KYC by status: 56ms
5. Wallets by currency: 34ms
6. Audit by entity: 89ms

üìà Average: 70.83ms
=============================================================
```

**üìù –°–û–•–†–ê–ù–ò –≠–¢–ò –¶–ò–§–†–´!** –ú—ã –±—É–¥–µ–º —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å –Ω–∏–º–∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

**–ú–æ–∏ baseline —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
1. Orders by userId: ____ms
2. Orders by status: ____ms
3. Orders with JOIN: ____ms
4. KYC by status: ____ms
5. Wallets by currency: ____ms
6. Audit by entity: ____ms

Average: ____ms
```

---

## üöÄ –®–∞–≥ 4: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é (1 –º–∏–Ω—É—Ç–∞)

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∫ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
psql $DATABASE_URL -f prisma/migrations-manual/add-performance-indexes.sql
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```
CREATE INDEX
CREATE INDEX
CREATE INDEX
...
(40+ –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–æ–∑–¥–∞–µ—Ç—Å—è)
...
ANALYZE
‚úÖ Total indexes created: 42
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30-60 —Å–µ–∫—É–Ω–¥

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ "already exists"** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (IF NOT EXISTS)

---

## üìä –®–∞–≥ 5: –ò–∑–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ü–û–°–õ–ï (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–æ—Ç –∂–µ —Ç–µ—Å—Ç
npx tsx scripts/test-indexes-local.ts
```

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—É–ª—É—á—à–µ–Ω–∏–µ):**

```
üìä BASELINE MEASUREMENTS (Before Indexes):

1. Orders by userId: 12ms      ‚¨áÔ∏è 73% (–±—ã–ª–æ: 45ms)
2. Orders by status: 15ms      ‚¨áÔ∏è 81% (–±—ã–ª–æ: 78ms)
3. Orders with JOIN: 35ms      ‚¨áÔ∏è 72% (–±—ã–ª–æ: 123ms)
4. KYC by status: 11ms         ‚¨áÔ∏è 80% (–±—ã–ª–æ: 56ms)
5. Wallets by currency: 8ms    ‚¨áÔ∏è 76% (–±—ã–ª–æ: 34ms)
6. Audit by entity: 18ms       ‚¨áÔ∏è 80% (–±—ã–ª–æ: 89ms)

üìà Average: 16.50ms            ‚¨áÔ∏è 77% (–±—ã–ª–æ: 70.83ms)
```

**üìù –°–†–ê–í–ù–ò –° BASELINE:**

| Query | Before | After | Improvement |
|-------|--------|-------|-------------|
| Orders by userId | ___ms | ___ms | ___% |
| Orders by status | ___ms | ___ms | ___% |
| Orders with JOIN | ___ms | ___ms | ___% |
| KYC by status | ___ms | ___ms | ___% |
| Wallets by currency | ___ms | ___ms | ___% |
| Audit by entity | ___ms | ___ms | ___% |
| **Average** | ___ms | ___ms | **___% ‚¨áÔ∏è** |

**–¶–µ–ª–µ–≤–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ:** 60-80% ‚¨áÔ∏è

**–ï—Å–ª–∏ —É–ª—É—á—à–µ–Ω–∏–µ < 50%** - —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫, –ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏

---

## üß™ –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (5 –º–∏–Ω—É—Ç)

### A. –ó–∞–ø—É—Å—Ç–∏—Ç—å dev server

```bash
npm run dev
```

### B. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

#### Admin Panel:
- [ ] http://localhost:3000/admin - Dashboard –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- [ ] http://localhost:3000/admin/orders - –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
- [ ] http://localhost:3000/admin/orders?status=PENDING - –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- [ ] http://localhost:3000/admin/kyc - KYC —Å–µ—Å—Å–∏–∏
- [ ] http://localhost:3000/admin/users - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] http://localhost:3000/admin/audit - Audit logs

#### Client Panel:
- [ ] http://localhost:3000/buy - –§–æ—Ä–º–∞ –ø–æ–∫—É–ø–∫–∏
- [ ] http://localhost:3000/orders - –ú–æ–∏ –∑–∞–∫–∞–∑—ã
- [ ] http://localhost:3000/kyc - KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è

### C. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API endpoints:

```bash
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

# 1. Rates
curl http://localhost:3000/api/rates

# 2. Admin stats
curl http://localhost:3000/api/admin/stats

# 3. Orders list (–Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
# –û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
```

### D. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

**–•–æ—Ä–æ—à–∏–µ –∑–Ω–∞–∫–∏:**
```
GET /api/admin/stats 200 in 350ms  ‚úÖ (–±—ã—Å—Ç—Ä–µ–µ —á–µ–º —Ä–∞–Ω—å—à–µ)
GET /api/admin/orders 200 in 120ms ‚úÖ (–±—ã—Å—Ç—Ä–µ–µ)
```

**–ü–ª–æ—Ö–∏–µ –∑–Ω–∞–∫–∏:**
```
ERROR: relation "idx_orders_user_id" does not exist  ‚ùå
Timeout error                                         ‚ùå
```

**–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí –≥–æ—Ç–æ–≤—ã –∫ production!**

---

## ‚úÖ –®–∞–≥ 7: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```
‚úÖ Backup —Å–æ–∑–¥–∞–Ω: backups/local_backup_YYYYMMDD_HHMMSS.sql
‚úÖ –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã: 42 –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–∞
‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞: ___% ‚¨áÔ∏è
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
‚úÖ API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç: –ë–µ–∑ –æ—à–∏–±–æ–∫
```

### –ú–µ—Ç—Ä–∏–∫–∏:

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----|-------|-----------|
| Average query time | ___ms | ___ms | ___% ‚¨áÔ∏è |
| Dashboard load | ___s | ___s | ___% ‚¨áÔ∏è |
| Orders list | ___ms | ___ms | ___% ‚¨áÔ∏è |
| Index count | ___ | ___ | +42 |

---

## üîÑ Rollback (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å, –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º—Å—è:**

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup
psql $DATABASE_URL < backups/local_backup_YYYYMMDD_HHMMSS.sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë –≤–µ—Ä–Ω—É–ª–æ—Å—å
npx tsx scripts/test-indexes-local.ts
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: Production

**–ï—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã:**

1. ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–∏–ª–∞—Å—å –Ω–∞ 60-80%
2. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
3. ‚úÖ Backup –≥–æ—Ç–æ–≤

**‚Üí –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ production!**

**–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [APPLY_OPTIMIZATIONS_STEP_BY_STEP.md](./APPLY_OPTIMIZATIONS_STEP_BY_STEP.md)

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. DATABASE_URL –Ω–∞ Vercel ‚Üí `connection_limit=10`
2. Backup production –ë–î
3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ production
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üìã Checklist

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] DATABASE_URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (–ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î)
- [ ] Backup —Å–æ–∑–¥–∞–Ω: `./scripts/backup-local-db.sh`
- [ ] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] Baseline metrics –∏–∑–º–µ—Ä–µ–Ω—ã (–î–û)
- [ ] –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã: `add-performance-indexes.sql`
- [ ] After metrics –∏–∑–º–µ—Ä–µ–Ω—ã (–ü–û–°–õ–ï)
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ 60-80% –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ ‚úÖ
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ (–≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—é—Ç)
- [ ] API endpoints –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã (–Ω–µ—Ç –æ—à–∏–±–æ–∫)

### –ì–æ—Ç–æ–≤ –∫ production?
- [ ] –õ–æ–∫–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã
- [ ] Backup —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] Rollback –∫–æ–º–∞–Ω–¥–∞ –∏–∑–≤–µ—Å—Ç–Ω–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω–∞

**–ï—Å–ª–∏ –≤—Å–µ —á–µ–∫–±–æ–∫—Å—ã –æ—Ç–º–µ—á–µ–Ω—ã ‚Üí –º–æ–∂–Ω–æ –Ω–∞ production! üöÄ**

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "DATABASE_URL not set"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env.local
cat .env.local | grep DATABASE_URL

# –ò–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
export DATABASE_URL="postgresql://..."
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: "pg_dump: command not found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# macOS
brew install postgresql

# Ubuntu/Debian
sudo apt-get install postgresql-client

# Windows
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ query –ø–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
psql $DATABASE_URL -c "ANALYZE;"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
psql $DATABASE_URL -c "EXPLAIN ANALYZE SELECT * FROM \"Order\" WHERE status = 'PENDING';"
```

---

**Ready! –ù–∞—á–∏–Ω–∞–µ–º —Å backup –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î! üöÄ**

```bash
chmod +x scripts/backup-local-db.sh
./scripts/backup-local-db.sh
```

